CREATE schema %dataset_name% AUTHORIZATION root;

CREATE TABLE %dataset_name%.DATASET_VALUE (ID bigint, ID_DATASET_SCHEMA text, PRIMARY key (ID))  TABLESPACE pg_default;
CREATE TABLE %dataset_name%.TABLE_VALUE (ID bigint, ID_TABLE_SCHEMA text, DATASET_ID bigint, PRIMARY key (ID), FOREIGN KEY (dataset_id) REFERENCES %dataset_name%.dataset_value(id) ON DELETE CASCADE) TABLESPACE pg_default;
CREATE TABLE %dataset_name%.RECORD_VALUE(ID bigint, ID_RECORD_SCHEMA text, ID_TABLE bigint, DATASET_PARTITION_ID bigint, PRIMARY key (ID), FOREIGN KEY (id_table) REFERENCES %dataset_name%.table_value(id) ON DELETE CASCADE) TABLESPACE pg_default;
CREATE TABLE %dataset_name%.FIELD_VALUE (ID bigint, TYPE text, VALUE text, ID_FIELD_SCHEMA text, ID_RECORD bigint, PRIMARY key (ID), FOREIGN KEY (id_record) REFERENCES %dataset_name%.record_value(id) ON DELETE CASCADE) TABLESPACE pg_default;
CREATE TABLE %dataset_name%.RULES_RESULT(ID bigint, NAME text, PRIMARY key (ID)) TABLESPACE pg_default;

ALTER TABLE %dataset_name%.DATASET_VALUE  OWNER to root;
ALTER TABLE %dataset_name%.TABLE_VALUE  OWNER to root;
ALTER TABLE %dataset_name%.RECORD_VALUE  OWNER to root;
ALTER TABLE %dataset_name%.FIELD_VALUE  OWNER to root;
ALTER TABLE %dataset_name%.RULES_RESULT  OWNER to root;


CREATE SEQUENCE %dataset_name%.hibernate_sequence INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE;
	
ALTER SEQUENCE %dataset_name%.hibernate_sequence OWNER TO root;
GRANT ALL ON SEQUENCE %dataset_name%.hibernate_sequence TO root;

commit;